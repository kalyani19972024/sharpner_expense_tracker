<!-- <!-- 
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Income & Expense Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    body {
      margin: 0;
      padding: 24px;
      font-family: system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
      background: #f0f3f8;
      color: #1f2d3a;
    }
    .wrapper {
      max-width: 1000px;
      margin: auto;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .top {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
    }
    .title {
      font-size: 1.4rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .badge {
      background: gold;
      padding: 4px 12px;
      border-radius: 999px;
      font-size: 0.65rem;
      font-weight: 700;
      color: #1f2d3a;
    }
    .month-year-bar {
      width: 100%;
      text-align: center;
      font-size: 1.1rem;
      font-weight: 600;
      margin-top: 4px;
      padding: 6px 0;
    }
    .controls {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }
    .controls .filter {
      display: flex;
      gap: 6px;
    }
    .controls button {
      padding: 8px 14px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: #d9e2ef;
      font-weight: 600;
    }
    .controls button.active {
      background: #1f2d3a;
      color: white;
    }
    .download-group {
      display: flex;
      gap: 8px;
    }
    .btn {
      padding: 8px 14px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      background: #1f2d3a;
      color: white;
    }
    .btn.disabled {
      background: #b0b7c3;
      cursor: not-allowed;
    }
    .section {
      background: white;
      padding: 16px;
      border-radius: 8px;
      box-shadow: 0 6px 18px -6px rgba(0,0,0,0.08);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      margin-top: 8px;
    }
    th, td {
      padding: 10px 12px;
      text-align: left;
      border-bottom: 1px solid #e8edf4;
    }
    th {
      background: #f4f7fc;
      font-weight: 600;
    }
    .income-val {
      color: #0f9d58;
      font-weight: 500;
    }
    .expense-val {
      color: #d93025;
      font-weight: 500;
    }
    .empty {
      padding: 30px;
      text-align: center;
      color: #777;
      font-style: italic;
    }
    .yearly-title {
      margin-top: 4px;
      font-weight: 600;
      font-size: 1.1rem;
    }
    @media (max-width: 850px) {
      .top { flex-direction: column; align-items: flex-start; }
    }
  </style>
</head>
<body>

  <div class="wrapper">
    <div class="top">
      <div class="title">
        Income & Expense Dashboard <div class="badge">Premium</div>
      </div>
      <div class="controls">
        <div class="filter">
          <button data-range="daily" class="filter-btn active">Daily</button>
          <button data-range="weekly" class="filter-btn">Weekly</button>
          <button data-range="monthly" class="filter-btn">Monthly</button>
        </div>
        <div class="download-group">
          <!-- ✅ Download buttons -->
          <button id="downloadEntries" class="btn">Download Entries</button>
          <button id="downloadYearly" class="btn">Download Yearly</button>
        </div>
      </div>
    </div>

    <div class="month-year-bar" id="current-month-year">August 2025</div>

    <!-- Filtered entries -->
    <div class="section" aria-label="Filtered entries">
      <div style="font-weight:600; margin-bottom:8px;">Entries (Daily / Weekly / Monthly)</div>
      <div id="entry-table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Date</th>
              <th>Description</th>
              <th>Category</th>
              <th>Income</th>
              <th>Expense</th>
            </tr>
          </thead>
          <tbody id="entry-rows">
            <!-- filled dynamically -->
          </tbody>
        </table>
        <div id="empty-entries" class="empty" style="display:none;">
          No entries for selected period.
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <div class="pagination">
      <div id="page-info">Page 1 of 1 — Total entries: 0</div>
      <div class="page-controls">
        <button id="firstBtn">First</button>
        <button id="prevBtn">Prev</button>
        <button id="nextBtn">Next</button>
        <button id="lastBtn">Last</button>
      </div>
    </div>

    <!-- Yearly report -->
    <div class="section" aria-label="Yearly report">
      <div class="yearly-title">Yearly Report (by month)</div>
      <table>
        <thead>
          <tr>
            <th>Month</th>
            <th>Income</th>
            <th>Expense</th>
            <th>Savings</th>
          </tr>
        </thead>
        <tbody id="yearly-rows">
          <!-- filled dynamically -->
        </tbody>
      </table>
      <div id="empty-yearly" class="empty" style="display:none;">
        No data for current year.
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    const token = localStorage.getItem("token");

    // ✅ Download Entries
    document.getElementById("downloadEntries").addEventListener("click", async () => {
      try {
        const res = await axios.get("http://localhost:3000/expense/download", {
          headers: { Authorization: token },
          responseType: "blob"
        });

        const url = window.URL.createObjectURL(new Blob([res.data]));
        const link = document.createElement("a");
        link.href = url;
        link.setAttribute("download", "expenses_entries.csv");
        document.body.appendChild(link);
        link.click();
      } catch (err) {
        console.error("Download error:", err);
      }
    }); -->

//     // ✅ Download Yearly Report
//     document.getElementById("downloadYearly").addEventListener("click", async () => {
//       try {
//         const res = await axios.get("http://localhost:3000/expense/download/yearly", {
//           headers: { Authorization: token },
//           responseType: "blob"
//         });

//         const url = window.URL.createObjectURL(new Blob([res.data]));
//         const link = document.createElement("a");
//         link.href = url;
//         link.setAttribute("download", "yearly_report.csv");
//         document.body.appendChild(link);
//         link.click();
//       } catch (err) {
//         console.error("Yearly download error:", err);
//       }
//     });
//   </script>
// </body>
// </html>
//  -->
